<!DOCTYPE html>
<html dir="ltr" lang="en">
  <head>
    <%- include('layouts/head') %>
    <!-- This page plugin CSS -->
    <link
      href="/static/assets/libs/datatables.net-bs4/css/dataTables.bootstrap4.css"
      rel="stylesheet"
    />
    <!-- <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script> -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  </head>

  <body>
    <!-- ============================================================== -->
    <!-- Preloader - style you can find in spinners.css -->
    <!-- ============================================================== -->
    <div class="preloader">
      <div class="lds-ripple">
        <div class="lds-pos"></div>
        <div class="lds-pos"></div>
      </div>
    </div>
    <!-- ============================================================== -->
    <!-- Main wrapper - style you can find in pages.scss -->
    <!-- ============================================================== -->
    <div id="main-wrapper">
      <!-- ============================================================== -->
      <!-- Topbar header - style you can find in pages.scss -->
      <!-- ============================================================== -->
      <header class="topbar"><%- include('layouts/header') %></header>
      <!-- ============================================================== -->
      <!-- End Topbar header -->
      <!-- ============================================================== -->
      <!-- ============================================================== -->
      <!-- Left Sidebar - style you can find in sidebar.scss  -->
      <!-- ============================================================== -->
      <aside class="left-sidebar"><%- include('layouts/sidebar') %></aside>
      <!-- ============================================================== -->
      <!-- End Left Sidebar - style you can find in sidebar.scss  -->
      <!-- ============================================================== -->
      <!-- ============================================================== -->
      <!-- Page wrapper  -->
      <!-- ============================================================== -->
      <div class="page-wrapper">
        <!-- ============================================================== -->
        <!-- Bread crumb and right sidebar toggle -->
        <!-- ============================================================== -->
        <div class="page-breadcrumb">
          <div class="row">
            <div class="col-5 align-self-center">
              <h4 class="page-title">Sales Report</h4>
            </div>
            <div class="col-7 align-self-center">
              <div class="d-flex align-items-center justify-content-end">
                <nav aria-label="breadcrumb">
                  <ol class="breadcrumb">
                    <li class="breadcrumb-item">
                      <a href="/">Home</a>
                    </li>
                    <li class="breadcrumb-item active" aria-current="page">
                      Sales Report
                    </li>
                  </ol>
                </nav>
              </div>
            </div>
          </div>
        </div>
        <!-- ============================================================== -->
        <!-- End Bread crumb and right sidebar toggle -->
        <!-- ============================================================== -->
        <!-- ============================================================== -->
        <!-- Container fluid  -->
        <!-- ============================================================== -->
        <div class="container-fluid">
          <!-- ============================================================== -->
          <!-- Start Page Content -->
          <!-- ============================================================== -->
          <div class="row">
            <div class="col-12">
              <div class="card">
                <div class="card-body">
                  <span class="text-danger">*</span> Marks will be required.
                </div>
              </div>
            </div>
          </div>

          <!-- ============================================================== -->
          <!-- Cards content -->
          <!-- ============================================================== -->
          <div class="row">
            <div class="col-12">
              <div class="card">
                <div class="card-body">
                  <h4 class="card-title">Column rendering</h4>
                  <h6 class="card-subtitle">
                    Each column has an optional rendering control called
                    <code> columns.render</code> which can be used to process
                    the content of each cell before the data is used.
                    <code> columns.render</code> has a wide array of options
                    available to it for rendering different types of data
                    orthogonally (ordering, searching, display etc), but it can
                    be used very simply to manipulate the content of a cell, as
                    shown here.
                  </h6>

                  <div class="table-responsive">
                    <table
                      id="file_export"
                      class="table table-striped table-bordered display"
                      style="width: 100%"
                    >
                    <% if (data.length > 3) { %>
                      <thead>
                          <tr>
                              <% var saleData = JSON.parse(data); %>
                              <% Object.keys(saleData[0]).forEach((key) => { %>
                                  <th><%= key %></th>
                              <% }); %>
                          </tr>
                      </thead>
                      <tbody>
                          <% saleData.forEach((sale) => { %>
                              <tr>
                                  <% Object.keys(sale).forEach((key) => { %>
                                      <td>
                                          <% if (key === 'Last Status') { %>
                                              <% if (sale[key] === null) { %>
                                                  <span class="label label-success label-rounded">Complete</span>
                                              <% } else if (sale[key] === true) { %>
                                                  <span class="label label-rounded label-primary">Inprocess</span>
                                              <% } else { %>
                                                  <%= sale[key] %>
                                              <% } %>
                                          <% } else { %>
                                              <%= sale[key] %>
                                          <% } %>
                                      </td>
                                  <% }); %>
                              </tr>
                          <% }); %>
                      </tbody>
                      <tfoot>
                          <tr>
                              <% Object.keys(saleData[0]).forEach((key) => { %>
                                  <th><%= key %></th>
                              <% }); %>
                          </tr>
                      </tfoot>
                  <% } else { %>
                      <h1>No Data Found</h1>
                  <% } %>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- <div col-lg-5 col-sm-12>
                      <div id="inProcessTableContainer"></div>
                    </div> -->
          <!-- ============================================================== -->
          <!-- End PAge Content -->
          <!-- ============================================================== -->
          <!-- ============================================================== -->
          <!-- Right sidebar -->
          <!-- ============================================================== -->
          <!-- .right-sidebar -->
          <!-- ============================================================== -->
          <!-- End Right sidebar -->
          <!-- ============================================================== -->
        </div>
        <!-- ============================================================== -->
        <!-- End Container fluid  -->
        <!-- ============================================================== -->
        <!-- ============================================================== -->
        <!-- footer -->
        <!-- ============================================================== -->
        <footer class="footer text-center">
          <%- include('layouts/footer') %>
        </footer>
        <!-- ============================================================== -->
        <!-- End footer -->
        <!-- ============================================================== -->
      </div>
      <!-- ============================================================== -->
      <!-- End Page wrapper  -->
      <!-- ============================================================== -->
    </div>
    <!-- ============================================================== -->
    <!-- End Wrapper -->
    <!-- ============================================================== -->
    <!-- ============================================================== -->
    <!-- customizer Panel -->
    <!-- ============================================================== -->
    <!-- <aside class="customizer"></aside>
    <div class="chat-windows"></div> -->
    <!-- ============================================================== -->
    <!-- All Jquery -->
    <!-- ============================================================== -->
    <%- include('layouts/scriptsLink') %>
    <!--This page plugins -->
    <script src="/static/assets/extra-libs/DataTables/datatables.min.js"></script>
    <!-- start - This is for export functionality only -->
    <script src="https://cdn.datatables.net/buttons/1.5.1/js/dataTables.buttons.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/1.5.1/js/buttons.flash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.32/pdfmake.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.32/vfs_fonts.js"></script>
    <script src="https://cdn.datatables.net/buttons/1.5.1/js/buttons.html5.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/1.5.1/js/buttons.print.min.js"></script>
    <script src="/static/dist/js/pages/datatable/datatable-advanced.init.js"></script>
    <!-- <script>
      $(document).ready(function() {
        // Data provided from the server
    var saleData = JSON.parse(`<%- data %>`);
    var currentPage = 1;
    var pageSize = 10; // Number of rows per page

    // Function to populate the table with data for the current page
    function populateTable(page) {
        $('#tableBody').empty(); // Clear the existing table body
        var startIndex = (page - 1) * pageSize;
        var endIndex = startIndex + pageSize;
        var tableRows = '';
        for (var i = startIndex; i < endIndex && i < saleData.length; i++) {
            var row = saleData[i];
            var tableRow = '<tr>';
            Object.keys(row).forEach(function(key) {
                if (key === 'Last Status') {
                    if (row[key] === null) {
                        tableRow += '<td><span class="label label-success label-rounded">Complete</span></td>';
                    } else if (row[key] === true) {
                        tableRow += '<td><span class="label label-rounded label-primary">Inprocess</span></td>';
                    }
                } else {
                    tableRow += '<td>' + row[key] + '</td>';
                }
            });
            tableRow += '</tr>';
            tableRows += tableRow;
        }
        $('#tableBody').append(tableRows);
    }

    // Initial table population
    populateTable(currentPage);

    // Event handler for next page button
    $('#nextPageButton').on('click', function() {
        currentPage++;
        populateTable(currentPage);
    });

    // Event handler for previous page button
    $('#prevPageButton').on('click', function() {
        if (currentPage > 1) {
            currentPage--;
            populateTable(currentPage);
        }
    });
});
    </script> -->
  </body>
</html>
